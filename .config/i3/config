################################################################################
# i3 config file
################################################################################
# General settings

# Set mod key (Mod1=<Alt>, Mod4=<Super>)
set $mod Mod4

# Font for window titles
font xft:JetBrainsMono-Regular 13

# start a terminal
bindsym $mod+Return     exec alacritty

# kill focused window
bindsym $mod+x          kill

# reload the configuration file
bindsym $mod+Shift+c    reload

# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r    restart

# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e    exec --no-startup-id i3-msg exit

# Set shut down, restart and locking features
bindsym $mod+Shift+Delete   mode "$mode_system"
set $mode_system (e)xit, (r)eboot, (s)hutdown
mode "$mode_system" {
    bindsym e    exec --no-startup-id i3-msg exit
    bindsym r    exec --no-startup-id systemctl reboot
    bindsym s    exec --no-startup-id systemctl poweroff

    # exit system mode: "Enter" or "Escape"
    bindsym Return mode "default"
    bindsym Escape mode "default"
}

# Resize window (you can also use the mouse for that)
bindsym $mod+r mode "resize"
mode "resize" {
        bindsym h resize     shrink width 5 px or 5 ppt
        bindsym j resize     grow height 5 px or 5 ppt
        bindsym k resize       shrink height 5 px or 5 ppt
        bindsym l resize    grow width 5 px or 5 ppt

        # exit resize mode: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

# Resize without entering "resize mode"
bindsym $mod+Control+l resize shrink width 10 px or 10 ppt
bindsym $mod+Control+k resize grow height 10 px or 10 ppt
bindsym $mod+Control+j resize shrink height 10 px or 10 ppt
bindsym $mod+Control+h resize grow width 10 px or 10 ppt

# Lock screen
bindsym $mod+Delete    exec --no-startup-id    i3lock -c 000000

# hide/unhide i3status bar
bindsym $mod+m    bar mode toggle

################################################################################
# navigation
######################################
# Set up monitor at launch automatically and set laptop screen as the primary one.
# Set monitor to the top (being on the vertical axis makes it possible to focus
# bottom/top and jump from one monitor to the next, which is not possible if the
# monitor is set to top-left or top-right in diagonal, for instance)
exec_always xrandr --output eDP --primary --mode 1920x1080 --pos 0x1080 --rotate normal --output HDMI-A-0 --mode 1920x1080 --pos 0x0 --rotate normal --output DisplayPort-0 --off --output DisplayPort-1 --off

# Container focuses where the mouse is (yes/no)
focus_follows_mouse    no

# Go to last urgent workspace
bindsym $mod+u    [urgent=latest] focus

# change focus
bindsym $mod+h    focus left
bindsym $mod+j    focus down
bindsym $mod+k    focus up
bindsym $mod+Down focus down
bindsym $mod+Up   focus up
bindsym $mod+l    focus right

# move focused window
bindsym $mod+Shift+h    move left
bindsym $mod+Shift+j    move down
bindsym $mod+Shift+k    move up
bindsym $mod+Shift+l    move right

# workspace back and forth (with/without active container)
workspace_auto_back_and_forth    no
bindsym $mod+Mod1+Tab            workspace next_on_output
bindsym $mod+Shift+Tab           move container to workspace back_and_forth; workspace back_and_forth
bindsym $mod+Tab                 workspace back_and_forth
bindsym Mod1+Tab                 exec "rofi -theme purple -font 'JetBrainsMono 14' -show-icons -width 90 -show window"

# toggle fullscreen mode for the focused container
bindsym $mod+f    fullscreen toggle

# Navigate workspaces next / previous
bindsym $mod+Mod1+l         workspace next
bindsym $mod+Mod1+h         workspace prev
bindsym $mod+Shift+Right    workspace next
bindsym $mod+Shift+Left     workspace prev
bindsym $mod+Right          workspace next_on_output
bindsym $mod+Left           workspace prev_on_output

# Bindings to "mark" and "goto" mark specified with 1 character
bindsym $mod+z                   exec i3-input -F 'mark %s' -l 1 -P 'Mark: '
bindsym $mod+g                   exec i3-input -F '[con_mark="%s"] focus' -l 1 -P 'Goto: '

# Workspace names
set $ws1   "1"
set $ws2   "2"
set $ws3   "3"
set $ws4   "4"
set $ws5   "5"
set $ws6   "6"
set $ws7   "7"
set $ws8   "8"
set $ws9   "9"
set $ws10  "10"

# switch to workspace
bindsym $mod+1   workspace $ws1
bindsym $mod+2   workspace $ws2
bindsym $mod+3   workspace $ws3
bindsym $mod+4   workspace $ws4
bindsym $mod+5   workspace $ws5
bindsym $mod+6   workspace $ws6
bindsym $mod+7   workspace $ws7
bindsym $mod+8   workspace $ws8
bindsym $mod+9   workspace $ws9
bindsym $mod+0   workspace $ws10

# determine which workspace appears on which screen
workspace 1  output  HDMI-A-0
workspace 2  output  HDMI-A-0
workspace 3  output  HDMI-A-0
workspace 4  output  HDMI-A-0
workspace 5  output  HDMI-A-0
workspace 6  output  HDMI-A-0
workspace 7  output  eDP
workspace 8  output  eDP
workspace 9  output  eDP
workspace 10 output  eDP

# move focused container to workspace and switch to workspace
bindsym $mod+Shift+1     move container to workspace $ws1;   workspace $ws1
bindsym $mod+Shift+2     move container to workspace $ws2;   workspace $ws2
bindsym $mod+Shift+3     move container to workspace $ws3;   workspace $ws3
bindsym $mod+Shift+4     move container to workspace $ws4;   workspace $ws4
bindsym $mod+Shift+5     move container to workspace $ws5;   workspace $ws5
bindsym $mod+Shift+6     move container to workspace $ws6;   workspace $ws6
bindsym $mod+Shift+7     move container to workspace $ws7;   workspace $ws7
bindsym $mod+Shift+8     move container to workspace $ws8;   workspace $ws8
bindsym $mod+Shift+9     move container to workspace $ws9;   workspace $ws9
bindsym $mod+Shift+0     move container to workspace $ws10;  workspace $ws10

################################################################################
# Layout
#######################################
# set default desktop layout (default is tiling), <stacking|tabbed>
workspace_layout    tabbed

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s      layout stacking
bindsym $mod+w      layout tabbed
bindsym $mod+e      layout toggle split

#start in opposite orientation from your monitor
default_orientation    vertical

#toggles split at each new window (Fibonnaci layout)
# for_window [class=".*"]    split toggle

# toggle the way a split happens in the focused window
bindsym $mod+t    split toggle

# toggle tiling / floating
bindsym $mod+Shift+space    floating toggle

# change focus between tiling / floating windows
bindsym $mod+space    focus mode_toggle

# Use Mouse+$mod to drag floating windows
floating_modifier    $mod

# toggle sticky
bindsym $mod+Shift+s    sticky toggle

# focus the surrounding containers
bindsym $mod+a    focus parent
bindsym $mod+c    focus child

################################################################################
# Scratchpad
#######################################
# Move the currently focused window to the scratchpad
bindsym $mod+minus     move scratchpad

# Show the next scratchpad window or hide the focused scratchpad window.
# If there are multiple scratchpad windows, this command cycles through them.
bindsym $mod+plus      scratchpad show, resize set 1900 1000, move position center

################################################################################
# Borders
#######################################
# Configure border style <normal|1pixel|pixel xx|none|pixel>
new_window pixel 3
new_float normal
default_floating_border pixel 3

# Hide borders
hide_edge_borders smart

# change borders
bindsym $mod+b    border none
bindsym $mod+y    border pixel 3
bindsym $mod+n    border normal

################################################################################
# dmenu
#######################################
bindsym $mod+Mod1+c    exec --no-startup-id ~/Dropbox/.custom/dmenu/cheatsheets.sh
bindsym $mod+Mod1+d    exec --no-startup-id ~/Dropbox/.custom/dmenu/documents.sh
bindsym $mod+Mod1+e    exec --no-startup-id ~/Dropbox/.custom/dmenu/edit_scripts.sh
bindsym $mod+Mod1+f    exec --no-startup-id ~/Dropbox/.custom/dmenu/filepaths.sh
bindsym $mod+Mod1+q    exec --no-startup-id ~/Dropbox/.custom/dmenu/quotes.sh
bindsym $mod+Mod1+r    exec --no-startup-id ~/Dropbox/.custom/dmenu/reading.sh
bindsym $mod+Mod1+s    exec --no-startup-id ~/Dropbox/.custom/dmenu/scripts.sh
bindsym $mod+Mod1+u    exec --no-startup-id ~/Dropbox/.custom/dmenu/university.sh
bindsym $mod+Mod1+w    exec --no-startup-id ~/Dropbox/.custom/dmenu/work.sh
bindsym $mod+Shift+u   exec --no-startup-id ~/Dropbox/.custom/dmenu/university_launchers.sh
bindsym $mod+d         exec --no-startup-id ~/Dropbox/.custom/dmenu/software.sh


################################################################################
# shortcuts
#######################################
bindsym $mod+control+r    exec --no-startup-id thunar ~/Desktop

# Simple calculator in terminal
bindsym $mod+masculine    exec alacritty -e bc

# Focus applications
bindsym $mod+q [class="Todoist"] focus

################################################################################
# sound
#######################################
set $volumepath ~/.config/i3-volume/volume
set $statuscmd i3status

# Signal used to update the status line
set $statussig SIGUSR1

# Amount to increase/decrease volume as a percentage
set $volumestep 5

bindsym XF86AudioRaiseVolume exec $volumepath -np -i $volumestep -t $statuscmd -u $statussig
bindsym XF86AudioLowerVolume exec $volumepath -np -d $volumestep -t $statuscmd -u $statussig
bindsym XF86AudioMute        exec $volumepath -mn -t $statuscmd -u $statussig
bindsym XF86AudioMicMute exec pactl set-source-mute alsa_input.pci-0000_03_00.6.analog-stereo toggle

################################################################################
# brightness
#######################################
# Control brightness more precisely through software `brightnessctl`
bindsym XF86MonBrightnessDown     exec "light -U 5"
bindsym XF86MonBrightnessUp       exec "light -A 5"

# Toggle laptop screen
bindsym $mod+Control+b            exec --no-startup-id ~/.local/bin/toggle_laptop_brightness


################################################################################
# applications
#######################################
# Start
bindsym $mod+BackSpace              exec alacritty -e glances
bindsym $mod+Print --release        exec --no-startup-id flameshot screen --path ~/Pictures/screenshots/
bindsym $mod+Shift+a                exec audacious
bindsym $mod+Shift+d --release      exec "killall dunst; exec notify-send 'restart dunst'"
bindsym $mod+Shift+f                exec --no-startup-id firefox
bindsym $mod+Shift+g                exec gimp
bindsym $mod+Shift+i                exec inkscape
bindsym $mod+Shift+t                exec thunar
bindsym $mod+Shift+v                exec alacritty -e vifm
bindsym $mod+Shift+w                exec --no-startup-id google-chrome-stable
bindsym $mod+Shift+x --release      exec --no-startup-id xkill
bindsym Print --release             exec --no-startup-id flameshot gui --path ~/Pictures/screenshots/

# Open applications on specific workspaces
assign [class="(?i)code"]               $ws1
assign [class="(?i)brave-browser"]      $ws3
assign [class="(?i)firefox"]            $ws3
assign [class="(?i)google-chrome"]      $ws3
assign [class="(?i)scribus"]            $ws4
assign [class="Audacity"]               $ws4
assign [class="Audacious"]              $ws4
assign [class="Gimp"]                   $ws4
assign [class="Inkscape"]               $ws4
assign [class="vlc"]                    $ws4
assign [class="(?i)org.gnome.Nautilus"] $ws5
assign [class="(?i)zathura"]            $ws6
assign [title="(?i)libreoffice"]        $ws7
assign [class="keepassxc"]              $ws8
assign [class="obs"]                    $ws8
assign [class="Transmission"]           $ws8

# Automatically switch to workspace when opening those
for_window [class="(?i)brave-browser"]      workspace $ws3
for_window [class="(?i)code"]               workspace $ws1
for_window [class="(?i)firefox"]            workspace $ws3
for_window [class="(?i)google-chrome"]      workspace $ws3
for_window [class="(?i)org.gnome.Nautilus"] workspace $ws5
for_window [class="(?i)scribus"]            workspace $ws4
for_window [class="(?i)zathura"]            workspace $ws6
for_window [class="Audacious"]              workspace $ws4
for_window [class="Gimp"]                   workspace $ws4
for_window [class="Inkscape"]               workspace $ws4
for_window [class="Transmission"]           workspace $ws8
for_window [class="audacity"]               workspace $ws4
for_window [class="keepassxc"]              workspace $ws8
for_window [class="obs"]                    workspace $ws8
for_window [class="vlc"]                    workspace $ws4
for_window [title="(?i)libreoffice"]        workspace $ws7

# Open specific applications in floating mode
for_window [class="(?i)virtualbox"]    floating enable border pixel 2
for_window [class="GParted"]           floating enable border pixel 2
for_window [class="Lightdm-settings"]  floating enable pixel 2
for_window [class="Lxappearance"]      floating enable sticky enable border pixel 2
for_window [class="Nitrogen"]          floating enable sticky enable border pixel 2
for_window [title="File Transfer*"]    floating enable border pixel 2
for_window [title="alsamixer"]         floating enable border pixel 2
for_window [class="(?i)zoom"]          floating enable border pixel 2

# Autostart applications
exec --no-startup-id         brightnessctl s 40%
exec --no-startup-id         firefox
exec --no-startup-id         nitrogen --restore
exec --no-startup-id         nm-applet
exec --no-startup-id         pasystray
exec --no-startup-id         todoist
exec --no-startup-id         xfce4-clipman
exec_always --no-startup-id  unclutter --timeout 3 --jitter 20 --ignore-scrolling &

################################################################################
# keyboard / mouse
#######################################
# Set compose key to Right Ctrl
exec_always --no-startup-id                   setxkbmap -option "compose:rctrl"

# Delay, interval
exec_always --no-startup-id                   xset r rate 250 60

################################################################################
# colors
#######################################
# Start i3bar to display a workspace bar (plus the system information i3status if available)
bar {
    i3bar_command i3bar
    status_command i3status
    position top

## please set your primary output first. Example: 'xrandr --output eDP1 --primary'
    tray_output primary
    bindsym button4 nop
    bindsym button5 nop

    colors {
        background #000000
        statusline #FDFFFC
        separator  #64A312
#                          border    backgr.    text
        focused_workspace  #000000   #FFFF00    #000000
        active_workspace   #20394D   #20394D    #FFFFFF
        inactive_workspace #222D32   #64A312    #000000
        binding_mode       #FFFFFF   #1264A3    #FFFFFF
        urgent_workspace   #FFFFFF   #CD2553    #FDFFFC
    }
}

# Theme colors
# class                   border  backgr. text    indic.  child_border
  client.focused          #000000 #00C8FF #000000 #FF0000 #00C8FF
  client.focused_inactive #222D32 #020D14 #CFD8DC #454948
  client.unfocused        #061229 #061229 #74848B #454948
  client.urgent           #FFFFFF #CD2553 #FDFFFC #FDFFFC
  client.placeholder      #F9FAF9 #061229 #FFFFFF #061229
  client.background       #061229
